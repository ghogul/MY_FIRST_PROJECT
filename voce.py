import numpy as np
import matplotlib.pyplot as plt
filename = "STRESS STRAIN.txt"
x = np.loadtxt(filename, usecols=(0))
y_1 = np.loadtxt(filename, usecols=(1))
y= y_1[10:]
#print(y)
s=np.zeros((len(y)))
for i in range(len(y)):
   s[i] = 500 + 250*y[i] + 250*(1-np.exp(-15*y[i]))
#print(s)
#plt.plot(y_1,x)
#plt.plot(y,s)
#plt.show()

stress = np.array([ 107.3551961,   214.71039219,  322.06558829,  429.42078439,  508.95606646,
  537.50421576,  564.94527382,  590.47030934,  613.95216167,  635.10645372,
  654.34461978 , 671.6628868 ,  687.39853356,  701.36695688,  713.8960285,
  725.14896312 , 735.2751593  , 744.58746944,  752.86997185,  760.39422966,
  767.26364642 , 773.74172713,  779.56779053,  784.96659482,  790.17877514,
  794.9101704 ,  799.54766918,  803.78130993,  807.9948699 ,  811.85828866,
  810.29608022,  821.06048459,  817.83634543,  828.16516232,  824.93317672,
  834.94757322,  831.7093785 ,  841.70415465,  838.37836207,  848.06072428,
  844.77491195,  854.28459138,  851.01199563,  860.39586504 , 857.13427074,
  866.68692115,  863.32729606,  872.6455532 ,  869.34748686,  878.84233288,
  875.45240918,  884.70804053,  881.39149145,  890.85004267,  887.43766975,
  896.64801039,  893.31916867,  902.75527512,  899.3255542 ,  908.49657809,
  905.16184306,  914.57902076 , 911.13808016,  920.66666111,  917.16294529,
  926.35404946,  922.97503509,  932.41655642,  928.93028731,  938.49204772,
  934.94004353,  944.12630651,  940.71775796, 950.17080546 , 946.64979612,
  956.23640999,  952.64503448,  961.81226784,  958.38615972,  967.83717009,
  964.29340403,  973.89216701,  970.27326965,  979.96200675,  976.28566429,
  985.47524876,  981.99981494,  992.06145462,  988.20737601,  997.60122489,
  994.00339141, 1003.62837446,  999.92804379, 1009.68403562, 1005.91219044,
 1015.1140079 , 1011.57462182, 1021.09025378])
strain = np.array([7.04077618e-04, 1.40815524e-03, 2.11223285e-03, 2.81631047e-03,
 5.56085887e-03, 1.33470689e-02, 2.18595003e-02, 3.07758139e-02,
 4.00501234e-02, 4.95356256e-02, 5.93186510e-02, 6.93272980e-02,
 7.96443794e-02, 9.00589479e-02, 1.00620278e-01, 1.11316318e-01,
 1.22128738e-01, 1.33221107e-01, 1.44270502e-01, 1.55363991e-01,
 1.66504128e-01, 1.77929440e-01, 1.89218413e-01, 2.00484063e-01,
 2.12046449e-01, 2.23411741e-01 ,2.35047432e-01, 2.46443017e-01,
 2.58116854e-01, 2.69516656e-01, 2.69894035e-01, 2.92787047e-01,
 2.93180768e-01, 3.16016094e-01, 3.16443962e-01, 3.39227423e-01,
 3.39692761e-01, 3.62913199e-01, 3.63387966e-01, 3.86222977e-01,
 3.86732504e-01, 4.09401163e-01, 4.09953934e-01, 4.32490327e-01,
 4.33092130e-01, 4.56146108e-01, 4.56761691e-01, 4.79309812e-01,
 4.79971018e-01, 5.02981269e-01, 5.03655857e-01, 5.26086681e-01,
 5.26810867e-01, 5.49727072e-01, 5.50466607e-01 ,5.72747845e-01,
 5.73542262e-01, 5.96341945e-01, 5.97154383e-01, 6.19260341e-01,
 6.20133903e-01, 6.42795615e-01, 6.43690518e-01, 6.66556418e-01,
 6.67459353e-01, 6.89436249e-01, 6.90402924e-01, 7.12933246e-01,
 7.13923454e-01, 7.36668651e-01, 7.37668178e-01, 7.59428713e-01,
 7.60499267e-01, 7.82848138e-01, 7.83946593e-01, 8.06537771e-01,
 8.07647913e-01, 8.29151475e-01, 8.30341505e-01, 8.52473153e-01,
 8.53696620e-01, 8.76103034e-01, 8.77341346e-01, 8.99870822e-01,
 9.01115869e-01, 9.22369631e-01, 9.23701753e-01, 9.46970578e-01,
 9.48255031e-01, 9.69814741e-01, 9.71165519e-01, 9.93209239e-01,
 9.94589025e-01, 1.01685663e+00, 1.01824999e+00, 1.03912908e+00, 1.04062329e+00, 1.06220077e+00])

# # print(stress[5])
a = stress[5:]
b = strain[5:]
# s=np.zeros((len(b)))
# for i in range(len(b)):
#    s[i] = 500 + 250*b[i] + 250*(1-np.exp(-15*b[i]))

# print(s)
plt.plot(y_1,x)
# plt.plot(strain,stress)
# plt.plot(b,s)
# plt.show()


'''power law'''
youngs_modulus = 210000 #Mpa
K = 0.002*youngs_modulus
s = np.zeros((len(b)))
for i in range(len(b)):
   s[i] = 1000*((2.81631047e-03+np.power(b[i],0.15)))
print(s)
print(stress)
plt.plot(strain,stress)
plt.plot(b,s)
#plt.show()

true_stress = stress*(1+strain)
true_strain = np.log(1+strain)


n = (true_strain[-1] - true_strain[-2])/(true_stress[-1] - true_stress[-2])

K = true_stress[-1]/(true_strain[-1]**n)
print(n)
print(K)
#print(true_stress)
#print(true_strain)
# plt.plot(true_strain,true_stress)
# plt.show()